# NACL

### NACL (Network Acess Control List) 란?

서브넷 레벨에서 트래픽을 제어하는 것으로 

NACL은 쉽게 생각하면 서브넷에서 들어오는 트래픽을 제어하는 방화벽이다.

### NACL 특징

- 보안 그룹처럼 방화벽 역할을 담당한다.
- 서브넷 단위
    - 인스턴스 단위로 제어 불가한다.
    - 다양한 서브넷에 연동이 가능하다. (1 : N)

- 포트 및 IP를 직접 거부 (Deny)가능 하다.
    - 외부 공격을 받는 상황 등 특정 IP를 차단하고 싶을 때 사용한다.

- Stateless
    - 들어오는 트래픽과 나가는 트래픽을 **구분하지 않는다**. 즉 나가는 트래픽에 대해 임시 포트 범위를 열어주어 다른 시스템과 **정상적으로 통신할 수 있게** 한다.

### NACL 규칙

**네트워크 트래픽을 제어하는 조건들을 설정하는 규칙**

**Rule Number** : 각 규칙에는 번호가 할당 되어있고, 낮은 번호부터 우선적으로 평가된다.

**트래픽 방향** 

- 인바운그 규칙 (Inbound Rules) : 외부에서 서브넷으로 들어오는 트래픽을 제어

- 아웃바운드 규칙 (OutBound Rules) : 서브넷에서 외부로 나가는 트래픽을 제어

**프로토콜** : TCP, UDP, ICMP

**포트 범위** : 포트 범위를 지정하여 트래픽을 제어

**소스** (Source) : 인바운드 규칙의 경우, 어떤 IP 주소나 서브넷에서 오는 트래픽을 허용할지 설정할 수 있다.

**허용 / 거부** : 트래픽을 허용, 거부할 수 있음

### NACL 규칙 순서

1. 규칙 번호가 낮은 번호부터 적용된다.



1. 규칙 번호를 100번으로 부여하게 된다면 정상적으로 112.12.35.4/32 IP 유저를 차단하여 해당 유저는 접속할 수 없게 된다.



1. 112.12.35.4/32 IP의 유저가 80번 포트는 차단하고 3306 포트로 들어오는 접속만 허용하고 싶다면 위와 같이 규칙 번호를 부여한다.