# PART 04

## 랜카드 NIC (Network Interface Card)

랜카드 NIC는 어떤 환경에서 사용하는가에 따라 이더넷용 랜카드와 토클린용 랜카드, FDDI, ATM용 랜카드 등으로 구분한다. 일반인이 사용하는 90% 이상은 이더넷용 랜카드 NIC를 사용한다.

인터넷을 사용할 수 있게 할 수 있게 하는 포트라고 생각하면 된다.

## 허브(HUB)

허브는 여러 종류가 있다.

네트워크 구성에서 가장 기본적인 구성 요소로 연결된 모든 PC들이 서로 통신할 수 있게 해주는 역할을 한다.

1. 속도에 따라 10Mbps 허브와 100Mbps (패스트 이더넷) 허브가 있다.
2. 포트 수 (구멍 수)도 8포트, 12포트, 24포트 허브 등으로 나뉜다.
3. 10메가 허브, 100메가 허브로도 나뉜다.

**허브에 붙어 있는 모든 것들은 같은 콜리전 도메인 안에 있다.** 

- 콜리전 도메인은 네트워크에서 데이터 충돌이 발생할 수 있는 범위 또는 구역이다.

허브는 명령어나 IP 주소를 주지 않아도 동작에 지장이 없다. 파워만 연결하고 사용하면 된다.

허브는 두 종류로 나눌 수 있다.

1. 인텔리전트 허브(Intelligent HUB)
2. 더미 허브(Dummy HUB)

인텔리전트 허브와 더미 허브를 나누는 가장 중요한 요소는 NMS(네트워크 관리 시스템)를 통해서 관리가 되는 가? 에 기준하여 나눈다.



### 더미 허브(Dummy Hub)

더미 허브(Dummy Hub)는 받은 데이터를 모든 포트로 그대로 전송하는 단순한 중계기이다. 

MAC 주소를 인식하거나 저장하지 못해 모든 트래픽이 브로드 캐스트처럼 전달되고, 충돌이 자주 발생해 속도와 효율이 낮다. 

현재는 스위치에 의해 거의 대체되어 사용되지 않는다.

### 인텔리전트 허브(Intelligent HUB)

인텔리전트 허브는 말 그대로 지능형 허브이다.

모든 데이터를 분석할 수 있고, 제어도 가능하다. 따라서 대형 네트워크에서 NMS를 사용할 때 쓴다.

| 항목 | 더미 허브 (Dummy Hub) | 인텔리전트 허브 (Intelligent Hub) |
| --- | --- | --- |
| 기본 기능 | 단순 신호 중계 | 단순 신호 중계 + 관리 기능 포함 |
| MAC 주소 인식 | 불가능 | 불가능 |
| 데이터 전송 방식 | 모든 포트에 전송 (브로드캐스트처럼 동작) | 모든 포트에 전송 (브로드캐스트처럼 동작) |
| 충돌 발생 | 많음 | 많음 |
| 트래픽 통계 | 불가능 | 가능 |
| 포트 상태 확인 | 불가능 | 가능 |
| 장애 진단 기능 | 없음 | 있음 |
| 포트 제어 | 불가능 | 일부 가능 |
| 사용 용도 | 과거 소규모 네트워크 | 과거 기업 환경, 네트워크 모니터링 용도 |
| 현재 사용 여부 | 거의 사용되지 않음 | 거의 사용되지 않음 (스위치로 대체됨) |

### 스위치, 브릿지

브리지는 허브가 하지 못하는 콜리전 도메인을 나누어주는 역할을 한다.

중간에 서서 브리지 테이블을 보면서 통신이 한 쪽만 진행되면 데이터가 넘어가지 않게 하고, 통신이 다리를 통과해야 한다면 다리를 건너게 해준다.

스위치와 브리지는 비슷한 기능을 한다.

### 기능

브리지

**learning** : 출발지의 맥 어드레스를 배운다.



**Flooding** : 들어온 포트를 제외한 나머지를 모든 포트로 뿌리는 것. 브로드캐스트나 멀티캐스트의 경우에도 발생하게 된다.



**Forwarding** : 브리지가 목적지의 맥 어드레스를 자신의 브리지 테이블이 가지고 있고, 이 목적지가 출발지의 목적지와 다른 세그먼트에 존재하는 경우에 일어난다. 오직 해당 포트쪽으로만 프레임을 뿌려준다.



**Filtering** : 브리지가 목적지의 맥 어드레스를 알고 있고, 출발지와 목적지가 같은 세그먼트에 있는 경우에 발생한다. (콜리전 도메인을 나누어 줄 수 있다.)



**Aging** : 디폴트 5분 (300초) 동안 같은 주소가 들어오지 않는다면 맥 주소 테이블에서 삭제한다.

### 브리지와 스위치의 차이점

- 스위치는 처리 방식이 하드웨어로 이루어져있어, 프레임을 처리하는 브리지에 비해 빠르다.
- 브리지는 포트들이 같은속도를 지원하는 반면, 스위치는 서로 다른 속도를 연결할 수 있다.
- 스위치는 브리지에 비해 포트 수가 많다.
- 스위치에 경우 Cut-through, Store-and-forward 방식을 사용하고 브리지는 Store-and-forward 방식만을 사용한다.

### 브리지와 스위티가 프레임을 처리하는 방식

**Cut-through** : 스위치가 들어오는 프레임의 목적지 주소만 본 후 바로 전송 처리를 시작하는 방식

**Store-and-forward** : 스위치나 브리지가 들어오는 프레임을 전부 받아들인 후 처리를 시작하는 방식

**Fragment-free** : Store-and-forward 와 Cut-through 방식의 장점을 결합한 방식이다. 전체프레임이 다 들어올 때까지 기다릴 필요가 없다. 에러 감지 능력이 우수하다.

## Looping

**하나의 호스트에서 다른 호스트로 가는 경로가 두 개 이상 만들어져 프레임이 네트워크상에서 무한정으로 뱅뱅 도는 현상**

### 루핑을 막는 방법

1. 사람이 네트워크를 구성한다.
2. 자동으로 루핑을 막아주는 알고리즘 '**스패닝 트리 알고리즘 (Spanning Tree Algorithm)**' 을 사용한다.

## 스패닝 트리 알고리즘

스위치나 브리지에서 발생할 수 있는 루핑을 미리 막기 위해 두 개 이상의 경로가 발생하면 하나를 제외하고 나머지 경로를 자동으로 막아두었다가 기존 경로에 문제가 생기면 막아둔 경로를 풀어서 데이터를 전송하는 알고리즘

대기하고 있던 다른 링크가 다시 살아나 연결을 해주는 데 걸리는 시간은 약 1분 이상이 소요된다.